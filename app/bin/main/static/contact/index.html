<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>
</head>
<body>
<h1>연락처 페이지입니다.</h1>
<a href="form.html">새 연락처</a>
<table id="x-contact-table" border="1">
<thead>
<tr>
    <th>이름</th>
    <th>이메일</th>
    <th>전화번호</th>
    <th>회사</th>
</tr>
</thead>
<tbody>
</tbody>
</table>
<button id="x-btn">추가</button>


<script>

    const btn = document.querySelector('#x-btn')
    const contactTable = document.querySelector('#x-contact-table tbody') // tbody 하면 이제 뒤에 태그 찾는 거임



    fetch('/contact/list')
        .then(function (response) {
            return response.json() //json 똥을 싸라
        })
        .then(function (contacts) { //json 똥을 가지고 이거 할 거임
            console.log(contacts)
            for (const contact of contacts) {
                console.log('출력확인', contact)
                const info = contact.split(',')
                console.log(info)
                const tr = document.createElement('tr')
                tr.innerHTML = `
            <td><a href="view.html?email=${info[1]}">${info[0]}</a></td>
            <td>${info[1]}</td>
            <td>${info[2]}</td>
            <td>${info[2]}</td>`

                contactTable.appendChild(tr)

            }
        })
        // .catch(function (error) {
        //     alert('서버 실행 오류입니다.')
        //     console.log(error) //내부적으로는 이렇게 띄움
        // })


    btn.addEventListener('click', () => {

    })



</script>
</body>
</html>